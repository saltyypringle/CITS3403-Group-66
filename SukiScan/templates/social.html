<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SukiScan Forum</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="social-page">
  <header>
    <img src="{{ url_for('static', filename='images/sukiscan-logo.png') }}" alt="Logo" id="logo">
    <nav>
      <ul>
        <li><a href="{{ url_for('myhome') }}">Home</a></li>
        <li><a href="{{ url_for('social') }}">Social</a></li>
        <li><a href="{{ url_for('mypage') }}">My Page</a></li>
        <li><a href="{{ url_for('addcharacter') }}">Add Character</a></li>
        <li>
          <img src="{{ url_for('static', filename='images/default-avatar.png') }}" alt="Avatar" id="avatar" onclick="toggleSidebar()">
        </li>
      </ul>
    </nav>
  </header>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-header"><h2>MY ACCOUNT</h2></div>
    <ul class="sidebar-menu">
      <li><a href="{{ url_for('profile') }}">Profile</a></li>
      <li><a href="{{ url_for('friends') }}">Friends</a></li>
      <li><a href="{{ url_for('logout') }}">Log Out</a></li>
    </ul>
  </div>

  <main class="chatroom">
    <div class="chat-header"><h2>Forum Discussions</h2></div>

    <form method="POST" action="{{ url_for('social') }}" class="chat-input">
      <input type="text" name="content" placeholder="Start a new post..." required>
      <button type="submit">Post</button>
    </form>

    <div class="chat-messages">
      {% for post in posts %}
        <div class="message">
          <div class="name-date">
            <span class="name">{{ post.user.username }}</span>
            <span class="date">{{ post.created_at.strftime('%d %B %Y') }}</span>
          </div>
          <p>{{ post.content }}</p>

          <div class="comments">
            {% for comment in post.comments %}
              <div class="message user-message">
                <div class="name-date">
                  <span class="name">{{ comment.user.username }}</span>
                  <span class="date">{{ comment.created_at.strftime('%d %B %Y') }}</span>
                </div>
                <p>{{ comment.content }}</p>
              </div>
            {% endfor %}
            <form method="POST" action="{{ url_for('add_comment', post_id=post.id) }}" class="chat-input">
              <input type="text" name="comment" placeholder="Add a comment..." required>
              <button type="submit">Reply</button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  </main>

  <script>
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
    }
  </script>
</body>
</html>
